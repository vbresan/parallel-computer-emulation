/* !!!
 *  Ubacit internet adresu i port u exception poruku!
 */

#include "Exception.h"

#include <string>

#include <stdio.h>	// snprintf
#include <unistd.h>	// getpid


/*****************************************************************************
 
 pred-procesorske konstante
 
*****************************************************************************/

#define BUFFER_SIZE	256


/*****************************************************************************

 Handle class Exception::Impl
 
*****************************************************************************/

class Exception::Impl
{
 public:
        string msg;
};


/*****************************************************************************
  
 class Exception 
 
*****************************************************************************/

/*----------------------------------------------------------------------------
 konstruktor
----------------------------------------------------------------------------*/

Exception::Exception
  (
   char const * i_msg
  )
   throw()
{  char buffer[BUFFER_SIZE];
   
   snprintf(buffer, BUFFER_SIZE, "[%i] %s", getpid(), i_msg);
   p->msg = buffer;
}


/*----------------------------------------------------------------------------
 destruktor
----------------------------------------------------------------------------*/

Exception::~Exception()
   throw()
{
   //!!! dummy
}


/*----------------------------------------------------------------------------
 public metode
----------------------------------------------------------------------------*/

char const * 
Exception::what() 
   const
   throw()
{
   return p->msg.c_str();
}
