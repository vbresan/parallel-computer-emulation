#FIG 3.2
Landscape
Center
Metric
A4      
100.00
Single
-2
1200 2
6 2250 1350 9900 10800
6 2610 1755 7965 10530
4 0 0 50 0 12 12 0.0000 4 180 840 2610 1890 write_rv\001
4 0 0 50 0 12 12 0.0000 4 135 630 2610 2100 writen\001
4 0 0 50 0 12 12 0.0000 4 165 315 2610 2310   (\001
4 0 0 50 0 12 12 0.0000 4 150 2625 2610 2520    int          const fd,\001
4 0 0 50 0 12 12 0.0000 4 180 2835 2610 2730    const void * const vptr,\001
4 0 0 50 0 12 12 0.0000 4 180 2415 2610 2940    size_t       const n\001
4 0 0 50 0 12 12 0.0000 4 165 315 2610 3150   )\001
4 0 0 50 0 12 12 0.0000 4 180 1995 2610 3360    throw(Exception)\001
4 0 0 50 0 12 12 0.0000 4 180 2310 2610 3570 {  size_t       nleft;\001
4 0 0 50 0 12 12 0.0000 4 180 2625 2610 3780    ssize_t      nwritten;\001
4 0 0 50 0 12 12 0.0000 4 180 2100 2610 3990    const char * ptr;\001
4 0 0 50 0 12 12 0.0000 4 180 3255 2610 4410    ptr   = (char const *) vptr;\001
4 0 0 50 0 12 12 0.0000 4 150 1365 2610 4620    nleft = n;\001
4 0 0 50 0 12 12 0.0000 4 165 1995 2610 4830    while(nleft > 0)\001
4 0 0 50 0 12 12 0.0000 4 150 630 2610 5040      {\001
4 0 0 50 0 12 12 0.0000 4 180 5355 2610 5250         if((nwritten = write(fd, ptr, nleft)) <= 0)\001
4 0 0 50 0 12 12 0.0000 4 150 1155 2610 5460           {\001
4 0 0 50 0 12 12 0.0000 4 165 3255 2610 5670              if(errno == EINTR)\001
4 0 0 50 0 12 12 0.0000 4 150 3255 2610 5880                   nwritten = 0;\001
4 0 0 50 0 12 12 0.0000 4 165 3885 2610 6090              else if(errno == EAGAIN)\001
4 0 0 50 0 12 12 0.0000 4 150 1680 2610 6300                {\001
4 0 0 50 0 12 12 0.0000 4 165 3360 2610 6510                   if(nleft == n)\001
4 0 0 50 0 12 12 0.0000 4 180 4200 2610 6720                        return try_again;\001
4 0 0 50 0 12 12 0.0000 4 135 2310 2610 6930                   else\001
4 0 0 50 0 12 12 0.0000 4 150 2205 2610 7140                     {\001
4 0 0 50 0 12 12 0.0000 4 150 3780 2610 7350                        nwritten = 0;\001
4 0 0 50 0 12 12 0.0000 4 180 3465 2610 7560                        usleep(1);\001
4 0 0 50 0 12 12 0.0000 4 150 2205 2610 7770                     }\001
4 0 0 50 0 12 12 0.0000 4 150 1680 2610 7980                }\001
4 0 0 50 0 12 12 0.0000 4 165 3780 2610 8190              else if(errno == EPIPE)\001
4 0 0 50 0 12 12 0.0000 4 180 3780 2610 8400                   return conn_dstrw;\001
4 0 0 50 0 12 12 0.0000 4 135 1785 2610 8610              else\001
4 0 0 50 0 12 12 0.0000 4 180 5355 2610 8820                   throw Exception(TXT_EXCPT_WRITE);\001
4 0 0 50 0 12 12 0.0000 4 150 1155 2610 9030           }\001
4 0 0 50 0 12 12 0.0000 4 150 2730 2610 9450         nleft -= nwritten;\001
4 0 0 50 0 12 12 0.0000 4 180 2730 2610 9660         ptr   += nwritten;\001
4 0 0 50 0 12 12 0.0000 4 150 630 2610 9870      }\001
4 0 0 50 0 12 12 0.0000 4 180 1995 2610 10290    return write_OK;\001
4 0 0 50 0 12 12 0.0000 4 150 105 2610 10500 }\001
-6
2 2 0 1 0 7 50 0 -1 0.000 0 0 -1 0 0 5
	 2250 1350 9900 1350 9900 10800 2250 10800 2250 1350
-6
