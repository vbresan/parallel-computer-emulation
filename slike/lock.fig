#FIG 3.2
Landscape
Center
Metric
A4      
100.00
Single
-2
1200 2
6 1800 2700 6975 7425
6 2025 3015 6435 7200
4 0 0 50 0 12 12 0.0000 4 135 420 2025 3150 void\001
4 0 0 50 0 12 12 0.0000 4 135 420 2025 3360 lock\001
4 0 0 50 0 12 12 0.0000 4 165 315 2025 3570   (\001
4 0 0 50 0 12 12 0.0000 4 180 4200 2025 3780    shm_lock_t    volatile * const plock,\001
4 0 0 50 0 12 12 0.0000 4 180 3780 2025 3990    shm_lock_id_t            const id\001
4 0 0 50 0 12 12 0.0000 4 165 315 2025 4200   )\001
4 0 0 50 0 12 12 0.0000 4 165 1050 2025 4410    throw()\001
4 0 0 50 0 12 12 0.0000 4 150 105 2025 4620 {\001
4 0 0 50 0 12 12 0.0000 4 180 3150 2025 4830    plock->status[id] = locked;\001
4 0 0 50 0 12 12 0.0000 4 180 3990 2025 5040    while(plock->status[!id] == locked)\001
4 0 0 50 0 12 12 0.0000 4 180 3150 2025 5250         if(plock->turn == !id)\001
4 0 0 50 0 12 12 0.0000 4 150 1155 2025 5460           {\001
4 0 0 50 0 12 12 0.0000 4 180 4410 2025 5670              plock->status[id] = unlocked;\001
4 0 0 50 0 12 12 0.0000 4 180 3990 2025 5880              while(plock->turn == !id)\001
4 0 0 50 0 12 12 0.0000 4 180 2940 2025 6090                   usleep(1);\001
4 0 0 50 0 12 12 0.0000 4 180 4200 2025 6300              plock->status[id] = locked;\001
4 0 0 50 0 12 12 0.0000 4 150 1155 2025 6510           }\001
4 0 0 50 0 12 12 0.0000 4 135 1260 2025 6720         else\001
4 0 0 50 0 12 12 0.0000 4 180 2415 2025 6930              usleep(1);\001
4 0 0 50 0 12 12 0.0000 4 150 105 2025 7140 }\001
-6
2 2 0 1 0 7 50 0 -1 0.000 0 0 -1 0 0 5
	 1800 2700 6975 2700 6975 7425 1800 7425 1800 2700
-6
